using BLL;
using Models;
using System.Security.Cryptography.X509Certificates;
using System.Security.Principal;

namespace ConsoleAppPrincipal
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            int opc;
            do
            {
                Console.Clear();
                Console.WriteLine("Programa GESTÂO\n\n");
                Console.WriteLine("Opções de Cadastro\n");
                Console.WriteLine("[1]Cadastrar Usuário\n" +
                                  "[2]Cadastrar Permissões \n" +
                                  "[3]Cadastrar Grupo\n" +
                                  "[4]Alterar Nome do grupo \n" +
                                  "[5]Alterar Descrição da Permissão\n" +
                                  "[6]Alterar Usuário\n" +
                                  "[7]Excluir Usuário\n" +
                                  "[8]Excluir Permissão\n" +
                                  "[9]Excluir Grupo\n" +
                                  "[10]Exibir Usuários\n" +
                                  "[11]Exibir Grupos de Usuários\n" +
                                  "[0]Sair");
                opc = Convert.ToInt32(Console.ReadLine());
                Console.Clear();
                Funcao funcao = new Funcao();
                switch (opc)
                {
                    case 1: //Cadastrar usuario


                        funcao.CadastrarUsuario();

                        break;

                    case 2: // Cadastrar Permissões

                        funcao.CadastrarPermissao();

                        break;

                    case 3: // Cadatrar Grupo de Usuário

                        funcao.CadastrarGrupo();


                        break;

                    case 4: // Alterar O nome do Grupo

                        funcao.AlterarGrupo();


                        break;

                    case 5:// Alterar Permissão

                        funcao.AlterarPermissao();

                        break;

                    case 6://Alterar Usuário

                        funcao.AlterarUsuario();

                        break;

                    case 7:

                        funcao.ExcluirUsuario();

                        break;

                    case 8:// Excluir Permissao(descricao)

                        funcao.ExcluirPermissao();

                        break;

                    case 9: // Excluir Grupo

                        funcao.ExcluirGrupo();

                        break;

                    case 10: // buscar TODOS OS USUARIO e BUSCAR POR NOME
                        int opc_busca;
                        string sim_nao;
                        do
                        {
                            Console.WriteLine("FORMAS DE BUSCAS\n\n");
                            Console.WriteLine("[1] BUSCAR TODOS\n [2]BUSCAR POR NOME");
                            opc_busca = Convert.ToInt32(Console.ReadLine());

                            if (opc_busca == 1)
                            {
                                funcao.BuscarTodosUsuarios();

                            }
                            else if (opc_busca == 2)
                            {
                                funcao.Buscar_Nome_Usuario();
                            }
                           
                            
                            Console.WriteLine("Deseja fazer outra pesquisa");
                            sim_nao = Console.ReadLine().ToUpper();


                        } while (sim_nao == "S");

                        break;

                    case 11:
                        {

                            try
                            {
                                GrupoUsuarioBLL grupousuarioBLL = new GrupoUsuarioBLL();
                                List<GrupoUsuario> grupo_usuarios = grupousuarioBLL.BuscarTodosGrupos();

                                foreach (GrupoUsuario item in grupo_usuarios)
                                {

                                    Console.WriteLine("ID do Grupo Usuario: " + item.Id);
                                    Console.WriteLine("Nome do Grupo: " + item.NomeGrupo);
                                  
                                    Console.WriteLine("\n\n");

                                }
                                Console.WriteLine("Tecle ENTER para voltar ao MENU");
                                Console.ReadLine();
                            }
                            catch (Exception ex)
                            {

                                Console.WriteLine(ex.Message);
                            }

                        }

                        break;

                }









            } while (opc != 0);
            Console.Clear();
            Console.WriteLine("\t\t\t\t\t\n\n\nOBRIGADO POR USAR MEU PROGRAMA\n\n\n");

        }
    }
}